<script>
    // URL do arquivo senhas.txt no GitHub
    const FILE_URL = 'https://raw.githubusercontent.com/Vini399/EJ.-Painel/main/senhas.txt';

    document.getElementById('loginForm').addEventListener('submit', function(event) {
        event.preventDefault();  // Impede o envio do formulário

        const user = document.getElementById('user').value.trim();  // Remove espaços em branco
        const password = document.getElementById('password').value.trim();  // Remove espaços em branco
        
        // Faz a requisição para o arquivo senhas.txt
        fetch(FILE_URL)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erro ao acessar o arquivo de senhas.');
                }
                return response.text();
            })
            .then(data => {
                const lines = data.split('\n').filter(line => line.trim() !== '');  // Divide o conteúdo em linhas e remove linhas vazias

                let isValid = false;

                // Verifica cada linha se corresponde ao usuário e senha fornecidos
                for (const line of lines) {
                    const [storedUser, storedPass] = line.split(":").map(item => item.trim());  // Divide e remove espaços
                    if (user === storedUser && password === storedPass) {
                        isValid = true;
                        break;  // Se encontrar um usuário/senha válidos, sai do loop
                    }
                }

                // Exibe a mensagem diretamente no navegador
                if (isValid) {
                    setTimeout(() => {
                        window.location.href = 'indexpainel.html';  // Altere para o caminho correto se necessário
                    }, 1000);
                } else {
                    alert('Usuário ou senha incorretos. Tente novamente.');
                }
            })
            .catch(error => {
                alert('Erro ao verificar as credenciais: ' + error.message);
            });
    });
</script>
